# 工资管理系统数据库

此目录包含工资管理系统的数据库相关文件和脚本。

## 目录结构

- **design/**: 数据库设计文档
  - ER_Diagram.md: 实体关系图设计
  - Relational_Schema.md: 关系模式设计
- **scripts/**: SQL脚本文件
  - main.sql: 主执行脚本
  - ddl/: 数据定义语言脚本
  - dml/: 数据操作语言脚本
  - dcl/: 数据控制语言脚本
  - views/: 视图创建脚本
  - procedures/: 存储过程脚本
  - triggers/: 触发器脚本
- **test/**: 测试脚本和工具
  - test_odbc_connection.py: ODBC连接测试脚本

## 数据库概述

工资管理系统使用Microsoft SQL Server数据库。数据库名称为PayrollDB，包含以下主要表：

1. **Department (部门表)**: 存储公司部门信息
2. **Position (职位表)**: 存储职位及对应工资信息
3. **Employee (员工表)**: 存储员工基本信息
4. **Salary (工资表)**: 存储员工工资信息
5. **Attendance (考勤表)**: 存储考勤记录
6. **SystemLog (系统日志表)**: 记录系统操作日志

系统实现了多个存储过程来处理复杂的业务逻辑，如计算工资、生成报表等。还包括多个视图来简化数据查询和多个触发器来保证数据完整性和记录变更历史。

## 数据库部署

请参考 `scripts/README.md` 了解如何部署和初始化数据库。

## 连接配置

系统默认使用Windows身份验证连接数据库。如需使用SQL身份验证，请修改config.ini文件中的数据库连接配置。

数据库连接测试可以使用 `test/test_odbc_connection.py` 脚本进行。

## 数据库维护

- 建议定期备份数据库，可以使用SQL Server自带的备份功能
- 定期检查系统日志表中的错误信息
- 为提高性能，定期重建索引和更新统计信息

## 安全考虑

- 所有密码都使用强密码，生产环境部署时请修改权限脚本中的默认密码
- 使用最小权限原则分配用户权限
- 生产环境中应定期轮换数据库密码 